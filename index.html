<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISM: High-Resolution & Precise Counterfactual Medical Image Generation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a73e8;
            --primary-dark: #0d47a1;
            --secondary-color: #f8f9fa;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --text-tertiary: #80868b;
            --shadow-sm: 0 1px 2px rgba(60, 64, 67, 0.1);
            --shadow-md: 0 2px 6px rgba(60, 64, 67, 0.15);
            --shadow-lg: 0 4px 12px rgba(60, 64, 67, 0.2);
            --radius: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: #ffffff;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 60px 0 40px;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: var(--shadow-md);
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1.2;
        }
        
        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin: 40px 0 20px;
            color: var(--primary-color);
            border-bottom: 2px solid #e8eaed;
            padding-bottom: 10px;
        }
        
        h3 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-primary);
        }
        
        p {
            margin: 16px 0;
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.7;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 20px;
        }
        
        .authors {
            margin: 5px 0;
            font-size: 1.1rem;
            color: white;
        }
        
        .author-name {
            display: inline-block;
            margin: 0 8px;
            white-space: nowrap;
        }
        
        .author-name a {
            color: white;
            text-decoration: none;
            border-bottom: 1px dashed rgba(255,255,255,0.6);
        }
        
        .author-name a:hover {
            border-bottom: 1px solid white;
        }
        
        .affiliations {
            margin: 10px 0 20px;
            font-size: 0.95rem;
            color: rgba(255,255,255,0.8);
        }
        
        .affiliation {
            display: inline-block;
            margin: 0 8px;
            white-space: nowrap;
        }
        
        .links-section {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0 10px;
        }
        
        .link-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            background-color: white;
            border-radius: var(--radius);
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }
        
        .link-button:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .link-button i {
            margin-right: 8px;
        }
        
        .paper-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            padding: 30px;
            margin: 30px 0;
        }
        
        .abstract-section {
            background-color: var(--secondary-color);
            border-left: 4px solid var(--primary-color);
            padding: 25px;
            border-radius: var(--radius);
            margin: 30px 0;
        }
        
        .abstract-section h2 {
            margin-top: 0;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .figure-container {
            text-align: center;
            margin: 40px 0;
        }
        
        .figure-image {
            width: 100%;
            max-width: 900px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
        }
        
        .figure-caption {
            margin-top: 15px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .result-card {
            background-color: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .result-image {
            width: 100%;
            height: 220px;
            background-color: #f1f3f4;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #e8eaed;
        }
        
        .result-content {
            padding: 20px;
        }
        
        .result-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .result-description {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }
        
        .method-steps {
            counter-reset: method-counter;
            list-style-type: none;
            padding-left: 0;
        }
        
        .method-step {
            position: relative;
            padding-left: 50px;
            margin-bottom: 20px;
            counter-increment: method-counter;
        }
        
        .method-step::before {
            content: counter(method-counter);
            position: absolute;
            left: 0;
            top: 0;
            background-color: var(--primary-color);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .method-step h3 {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .citation {
            background-color: var(--secondary-color);
            padding: 20px;
            border-radius: var(--radius);
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            margin: 20px 0;
            color: var(--text-secondary);
            overflow-x: auto;
        }
        
        footer {
            background-color: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .footer-links {
            margin: 15px 0;
        }
        
        .footer-links a {
            color: white;
            margin: 0 10px;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.8);
        }
        
        ul, ol {
            padding-left: 25px;
            margin: 20px 0;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        .highlight-box {
            background-color: #e8f0fe;
            border-radius: var(--radius);
            padding: 20px;
            margin: 25px 0;
            border-left: 4px solid var(--primary-color);
        }
        
        .highlight-box h3 {
            margin-top: 0;
            color: var(--primary-color);
        }
        
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9rem;
        }
        
        .metrics-table th, 
        .metrics-table td {
            border: 1px solid #e8eaed;
            padding: 12px 15px;
            text-align: center;
        }
        
        .metrics-table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .metrics-table tr:nth-child(even) {
            background-color: var(--secondary-color);
        }
        
        .metrics-table td:first-child {
            font-weight: 600;
            text-align: left;
        }
        
        .top-bar {
            display: flex;
            justify-content: flex-end;
            padding: 15px 0;
            background-color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
        }
        
        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            padding: 5px 0;
            position: relative;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        /* New styles for image gallery */
        .image-gallery-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            padding: 30px;
            margin: 30px 0;
        }
        
        .image-gallery {
            display: flex;
            flex-direction: row-reverse; /* Makes the gallery run from right to left */
            overflow-x: auto;
            gap: 15px;
            padding: 20px 0;
            scroll-behavior: smooth;
        }
        
        .gallery-item {
            flex: 0 0 auto;
            width: 300px;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .gallery-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }
        
        .gallery-title {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 8px 0;
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .gallery-item:hover .gallery-caption {
            opacity: 1;
        }
        
        .gallery-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .gallery-control {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .gallery-control:hover {
            background-color: var(--primary-dark);
        }
        
        /* New styles for GIF controls */
        .gif-item {
            position: relative;
        }
        
        .toggle-play-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 6px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(60, 64, 67, 0.3);
            transition: background-color 0.2s ease, transform 0.2s ease;
            z-index: 10;
            font-size: 0.9rem;
        }
        
        .toggle-play-btn i {
            margin-right: 5px;
        }
        
        .toggle-play-btn:hover {
            background-color: rgba(13, 71, 161, 0.9);
            transform: scale(1.05);
        }
        
        .toggle-play-btn:active {
            transform: scale(0.95);
        }

        .image-comparison {
            display: flex;
            background: var(--secondary-color);
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        .comparison-pair {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 300px;
        }
        
        .comparison-image {
            width: 100%;
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
        }
        
        .comparison-label {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.9rem;
        }
        
        .comparison-arrow {
            color: var(--primary-color);
            font-size: 2rem;
        }
        
        @media (max-width: 768px) {
            header {
                padding: 40px 0 30px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .container {
                padding: 0 15px;
            }
            
            .paper-section {
                padding: 20px;
            }
            
            .method-step {
                padding-left: 40px;
            }
            
            .method-step::before {
                width: 30px;
                height: 30px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-item {
                width: 250px;
            }
            
            .gallery-image {
                height: 250px;
            }
            
            .comparison-pair {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="container">
            <div class="nav-links">
                <a href="#abstract">Abstract</a>
                <a href="#synthesized-images">Synthesized Images</a>
                <a href="#method">Method</a>
                <a href="#results">Results</a>
                <a href="#citation">Citation</a>
            </div>
        </div>
    </div>
    
    <header>
        <div class="container">
            <h1>PRISM: High-Resolution & Precise Counterfactual Medical Image Generation</h1>
            <p class="subtitle">Using Language-guided Stable Diffusion</p>
            
            <div class="authors">
                <span class="author-name"><a href="https://www.cim.mcgill.ca/~amarkr/" target="_blank">Amar Kumar</a><sup>1,2</sup></span>
                <span class="author-name"><a href="https://www.cim.mcgill.ca/~anitakriz/" target="_blank">Anita Kriz</a><sup>1,2</sup></span>
                <span class="author-name"><a href="https://havaeimo.github.io/about" target="_blank">Mohammad Havaei</a><sup>3</sup></span>
                <span class="author-name"><a href="https://www.cim.mcgill.ca/~arbel/#" target="_blank">Tal Arbel</a><sup>1,2</sup></span>
            </div>
            
            <div class="affiliations">
                <span class="affiliation"><sup>1</sup>McGill University, Montreal, Canada</span>
                <span class="affiliation"><sup>2</sup>MILA (Quebec AI Institute), Montreal, Canada</span>
                <span class="affiliation"><sup>3</sup>Google Research, Montreal, Canada</span>
            </div>
            
            <div class="links-section">
                <a href="https://arxiv.org/pdf/2503.00196v1" class="link-button" target="_blank"><i class="fas fa-file-pdf"></i> Paper</a>
                <a href="https://github.com/Amarkr1/PRISM" class="link-button" target="_blank"><i class="fab fa-github"></i> Code</a>
                <a href="#" class="link-button"><i class="fas fa-play-circle"></i> Demo</a>
                <a href="https://stanfordmlgroup.github.io/competitions/chexpert/" class="link-button" target="_blank"><i class="fas fa-database"></i> Dataset</a>
                <a href="#" class="link-button"><i class="fas fa-video"></i> Video</a>
            </div>
        </div>
    </header>
    
    <main class="container">
        
        <div class="abstract-section" id="abstract">
            <h2>Abstract</h2>
            <p>
                Developing reliable and generalizable deep learning systems for medical imaging faces significant obstacles due to spurious correlations, data imbalances, and limited text annotations in datasets. Addressing these challenges requires architectures robust to the unique complexities posed by medical imaging data. The rapid advancements in vision-language foundation models within the natural image domain prompt the question of how they can be adapted for medical imaging tasks. In this work, we present PRISM, a framework that leverages foundation models to generate high-resolution, language-guided medical image counterfactuals using Stable Diffusion. Our approach demonstrates unprecedented precision in selectively modifying spurious correlations (the medical devices) and disease features, enabling the removal and addition of specific attributes while preserving other image characteristics. Through extensive evaluation, we show how PRISM advances counterfactual generation and enables the development of more robust downstream classifiers for clinically deployable solutions. To facilitate broader adoption and research, we make our code publicly available at https://github.com/Amarkr1/PRISM.
            </p>
        </div>

        <!-- New Synthesized Images Section -->
        <h2 id="synthesized-images">Synthesized Images</h2>
        <p>
            PRISM can generate high-fidelity counterfactual medical images with precise control over specific attributes. Below we showcase a variety of examples demonstrating our model's capability to sythesize text given a text prompt.
        </p>
        
        <!-- Image Gallery with Right-to-Left Display -->
        <div class="image-gallery-section">
            
            
            <div class="image-gallery" id="image-gallery">
                <div class="gallery-item">
                    <img src="images/image1.png" alt="Chest X-ray with pneumothorax" class="gallery-image">
                    <div class="gallery-title">Cardiomegaly</div>
                    <div class="gallery-caption">Chest x-ray of a patient with severe cardiomegaly and lots of support devices</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image2.png" alt="Chest X-ray with pleural effusion" class="gallery-image">
                    <div class="gallery-title">Healthy</div>
                    <div class="gallery-caption">Chest x-ray of a patient with no findings</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image3.png" alt="Chest X-ray with removed support device" class="gallery-image">
                    <div class="gallery-title">Healthy</div>
                    <div class="gallery-caption">Chest x-ray of a patient with no findings and support devices</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image4.png" alt="Chest X-ray with added cardiomegaly" class="gallery-image">
                    <div class="gallery-title">Cardiomegaly</div>
                    <div class="gallery-caption">Chest x-ray of a patient with cardiomegaly and no devices</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image5.png" alt="Normal chest X-ray" class="gallery-image">
                    <div class="gallery-title">Cardiomegaly & Pleural Effusion</div>
                    <div class="gallery-caption">Chest x-ray of a patient with cardiomegaly and pleural effusion</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image6.png" alt="Normal chest X-ray" class="gallery-image">
                    <div class="gallery-title">Pleural Effusion</div>
                    <div class="gallery-caption">Chest x-ray of a patient with pleural effusion</div>
                </div>
                <div class="gallery-item">
                    <img src="images/image7.png" alt="Normal chest X-ray" class="gallery-image">
                    <div class="gallery-title">Pleural Effusion</div>
                    <div class="gallery-caption">Chest x-ray of a patient with pleural effusion and support devices</div>
                </div>
            </div>
            <div class="gallery-controls">
                <button class="gallery-control" id="scroll-right"><i class="fas fa-chevron-left"></i></button>
                <button class="gallery-control" id="scroll-left"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
        
        
        
        <h2>Overview</h2>
        <p>
            -
        </p>
        
        <div class="highlight-box">
            <h3>Key Contributions</h3>
            <ul>
                <li>A novel pipeline for generating high-fidelity counterfactual medical images with unprecedented resolution and precision</li>
                <li>A specialized language-guided stable diffusion model fine-tuned on diverse medical imaging datasets</li>
                <li>A comprehensive evaluation framework for assessing the clinical accuracy and utility of generated counterfactual images</li>
            </ul>
        </div>
        
        <div class="figure-container">
            <img src="images/arch_v2.png" alt="PRISM pipeline" class="figure-image">
            <div class="figure-caption">
                <strong>Figure 2:</strong> Overview of the PRISM pipeline. Given an input medical image and a text description of the desired edit, our model generates a counterfactual image that implements the requested changes while preserving patient-specific anatomical details.
            </div>
        </div>
        

        <h2 id="results">Results</h2>
        <div class="results">
            <div class="figure-container">
                <div class="gif-container" style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                    <div class="gif-item" style="flex: 1; min-width: 300px; max-width: 450px;">
                        <img src="./images/animation5.gif" alt="PRISM results visualization - pathology addition" class="figure-image gif-image" style="width: 100%; height: auto;">
                        <div class="gif-title" style="text-align: center; font-weight: 600; color: var(--primary-color); margin-top: 10px; margin-bottom: 5px;">
                            Devices --> No Devices
                        </div>
                        <div class="gif-controls" style="display: flex; justify-content: center; margin-top: 10px;">
                            <button class="toggle-play-btn" data-status="playing" title="Pause/Play Animation" style="position: static; margin: 0 auto;">
                                <i class="fas fa-pause"></i> Pause Animation
                            </button>
                        </div>
                    </div>
                    <div class="gif-item" style="flex: 1; min-width: 300px; max-width: 450px;">
                        <img src="./images/animation4.gif" alt="PRISM results visualization - device removal" class="figure-image gif-image" style="width: 100%; height: auto;">
                        <div class="gif-title" style="text-align: center; font-weight: 600; color: var(--primary-color); margin-top: 10px; margin-bottom: 5px;">
                            Pleural Effusion --> Healthy
                        </div>
                        <div class="gif-controls" style="display: flex; justify-content: center; margin-top: 10px;">
                            <button class="toggle-play-btn" data-status="playing" title="Pause/Play Animation" style="position: static; margin: 0 auto;">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </div>
                    <div class="gif-item" style="flex: 1; min-width: 300px; max-width: 450px;">
                        <img src="./images/results.gif" alt="PRISM results visualization - device removal" class="figure-image gif-image" style="width: 100%; height: auto;">
                        <div class="gif-title" style="text-align: center; font-weight: 600; color: var(--primary-color); margin-top: 10px; margin-bottom: 5px;">
                            Cardiomegaly --> Healthy
                        </div>
                        <div class="gif-controls" style="display: flex; justify-content: center; margin-top: 10px;">
                            <button class="toggle-play-btn" data-status="playing" title="Pause/Play Animation" style="position: static; margin: 0 auto;">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="figure-caption">
                    <strong>Figure 3:</strong> Demonstration of PRISM's ability to perform precise counterfactual edits on chest X-rays. The GIFs show the progression from original images to counterfactual variants with specific pathologies added or removed while preserving anatomical integrity. <em>Use the pause/play buttons to control the animations.</em>
                </div>
            </div>
            <p>
                Our extensive evaluation demonstrates PRISM's ability to generate high-quality counterfactual medical images with unprecedented precision. The model successfully preserves patient-specific anatomical details while selectively modifying targeted disease features or removing spurious correlations as directed by language prompts.
            </p>
        </div>
        
        
                
        <h2 id="citation">Citation</h2>
        <div class="citation">
@article{kumar2025prism,
title={PRISM: High-Resolution \& Precise Counterfactual Medical Image Generation using Language-guided Stable Diffusion},
author={Kumar, Amar and Kriz, Anita and Havaei, Mohammad and Arbel, Tal},
year={2025}
}
        </div>
        
        <h2>Acknowledgements</h2>
        <p>
            The authors are grateful for funding provided by the Natural Sciences and Engineering Research Council of Canada, the Canadian Institute for Advanced Research (CIFAR) Artificial Intelligence Chairs program, Mila - Quebec AI Institute, Google Research, Calcul Quebec, Fonds de recherche du Québec (FRQNT),  and the Digital Research Alliance of Canada.
        </p>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#">Home</a>
                    <a href="#">Research</a>
                    <a href="#">Publications</a>
                    <a href="#">Team</a>
                    <a href="mailto:amar.kumar@mail.mcgill.ca">Contact</a>
                </div>
                <p class="copyright">© 2025 PRISM Research Team | McGill University | Probabilistic Vision Group</p>
            </div>
        </div>
    </footer>

     <script>
        // Original script for gallery scrolling preserved
        document.addEventListener('DOMContentLoaded', function() {
            const gallery = document.getElementById('image-gallery');
            const scrollLeftBtn = document.getElementById('scroll-left');
            const scrollRightBtn = document.getElementById('scroll-right');
            
            // Scroll amount for each button click
            const scrollAmount = 330; // Slightly more than image width to account for gap
            
            if (scrollLeftBtn && scrollRightBtn && gallery) {
                scrollLeftBtn.addEventListener('click', function() {
                    gallery.scrollBy({
                        left: scrollAmount,
                        behavior: 'smooth'
                    });
                });
                
                scrollRightBtn.addEventListener('click', function() {
                    gallery.scrollBy({
                        left: -scrollAmount,
                        behavior: 'smooth'
                    });
                });
            }
            
            // Simple and reliable GIF toggle functionality
            const toggleButtons = document.querySelectorAll('.toggle-play-btn');
            
            // Create a single transparent 1x1 pixel image to use for pausing
            const transparentPixel = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
            
            toggleButtons.forEach(button => {
                // Get the related GIF image
                const gifItem = button.closest('.gif-item');
                const gifImage = gifItem.querySelector('.gif-image');
                
                // Store original source on first load
                if (!gifImage.hasAttribute('data-original-src')) {
                    gifImage.setAttribute('data-original-src', gifImage.src);
                }
                
                button.addEventListener('click', function() {
                    const isPlaying = this.getAttribute('data-status') === 'playing';
                    
                    if (isPlaying) {
                        // PAUSE: Store current source if needed
                        if (!gifImage.hasAttribute('data-original-src')) {
                            gifImage.setAttribute('data-original-src', gifImage.src);
                        }
                        
                        // Replace with transparent pixel to stop animation
                        gifImage.src = transparentPixel;
                        
                        // Update button state
                        this.setAttribute('data-status', 'paused');
                        this.innerHTML = '<i class="fas fa-play"></i> Play Animation';
                    } else {
                        // PLAY: Restore original GIF with timestamp to force reload
                        const originalSrc = gifImage.getAttribute('data-original-src');
                        if (originalSrc) {
                            gifImage.src = originalSrc + '?t=' + Date.now();
                        }
                        
                        // Update button state
                        this.setAttribute('data-status', 'playing');
                        this.innerHTML = '<i class="fas fa-pause"></i> Pause Animation';
                    }
                });
            });
        });
    </script>
</body>
</html>